<!DOCTYPE html>
<html>

<head>
  <title>CSV Salary Calculation</title>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: left;
      padding: 20px;
      background-color: #fff;
    }

    .card {
      width: 100%;
      max-width: 400px;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 20px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    h3 {
      margin-top: 0;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
      color: #333;
      font-size: 18px;
    }

    #result {
      font-size: 16px;
      color: #000;
      margin-top: 15px;
      margin-bottom: 0;
    }
  </style>
</head>

<body>

  <div class="card">
    <h3>Average Salary</h3>
    <p id="result">Calculating...</p>
  </div>

  <script>
    $.get("data.csv", function (data) {
      // Split data and remove empty lines
      var rows = data.split("\n").filter(function (row) {
        return row.trim().length > 0;
      });

      var total = 0;
      var count = 0;

      // Start from i=1 to skip header
      for (var i = 1; i < rows.length; i++) {
        var cols = rows[i].split(",");

        // Ensure we have enough columns and the salary is a number
        if (cols.length > 3) {
          var salary = parseInt(cols[3]);
          if (!isNaN(salary)) {
            total += salary;
            count++;
          }
        }
      }

      if (count > 0) {
        var avg = total / count;
        // Display as integer to match requirement (₹69000)
        $("#result").text("Average Salary: ₹" + Math.round(avg));
      } else {
        $("#result").text("No valid data found.");
      }
    });
  </script>

</body>

</html>